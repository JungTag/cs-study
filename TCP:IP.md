# 네트워크의 기본 TCP/IP

> ### 인터넷으로 통신하는 데 있어 기반이 되는 프로토콜
>
> 패킷 통신 방식의 인터넷 프로토콜이 IP(Internet Protocol)과 전송 조절 프로토콜인 TCP(Transmission Control Protocol)로 이루어져 있다
>
> TCP는 IP에서 동장하기 때문에 서로 다른 프로토콜이며 서로 상호보완하는 관계를 갖고 있다

---

## IP

- node와 node, 즉 컴퓨터와 컴퓨터 간의 데이터 패킷을 전송하기 위해서 각 node의 주소를 필요로 한다

- 데이터의 조각들을 최대한 목적지로 보내는 역할을 수행한다. 조각들의 순서가 뒤바뀌거나 일부가 누락되더라도 크게 상관하지 않고 보내는 데 집중한다.

---

## TCP

- IP를 통해 받은 데이터 패킷들을 줄 세우고 망가졌거나 빠진 조각들을 다시 요청한다. 

- TCP - 데이터를 전송하기 전에 데이터 전송을 위한 연결을 만드는 연결지향 프로토콜이다

> 연결지향 프로토콜
>
> > 데이터를 전송하는 측과 데이터를 전송받는 측에서 전용의 데이터 전송 선로(session)을 만단다는 의미
> >
> > 데이터가 전송되기 전에 브라우저와 서버 간의 연결을 성립하는 과정이 데이터를 전송하는 과정 전에 이루어지게 된다. 연결을 만드는 과정은 이를테면 전화할 때 어떤 내용을 말하기에 앞서서 상대편을 확인하는 과정과 동일한 과정이다. 즉 서로의 존재를 확인하는 절차를 수행한다
> >
> > Three Way Handshake라고도 하는데 
> >
> > 1. 서버에게 메시지를 보내도 되냐는 신호를 보냄
> >
> > 2. 브라우저에게 데이터를 보내도 된다는 신호를 보냄
> >
> > 3. 이제 데이터를 쏘겠다라는 신호를 보냄
> >
> >    -> 3가지 신호를 통해 데이터 전송 선로 확립

### TCP의 기능

- 패킷이 빠졌을 경우, 재전송을 요청하는 기능
- 패킷에 일련번호를 줌으로써, 서로 다르게 도착될지도 모른느 패킷의 순서를 재조합하는 기능 

---

## TCP/IP가 각 어떤 역할을 하는 지 알았지만 이를 이용해서 컴퓨터간 데이터 통신 어떻게 가능한가?

이를 위해선 OSI 7계층에 대해 알아볼 필요가 있다. 하지만 오늘날 OSI 7계층보다 TCP/IP updated가 더 많이 사용되기 때문에 이를 중심으로 한번 알아봐야 한다

---

## TCP/IP

> 1. 물리 계층 (Physical Layer)
>
> > 모든 프로그램은 0과 1의 나열로 구성되어 있다. 다시 말해서 0과 1을 전달하면 데이터를 온전히 전달할 수 있다는 뜻이지만 전선은 통과시킬 수 있는 주파수의 범위가 정해졌있다. 만약 전자기파의 주파수 범위가 5에서 15이고 이를 7~10hz만 통과시킬 수 있는 전선을 통해 전자기파를 전달했을 때 데이터의 유실이 일어난다.
> >
> > 그래서 전자기파를 아날로그 신호로 바꿔야 한다. 
> >
> > 송신 측의 물리 계층에 있는 인코더를 통해 전자기파를 아날로그 신호로 변환하고 수신 측의 물리 계층에 있는 디코더를 통해 아날로그 신호를 전자 신호로 변환하는 기능을 수행하는 모듈이다. 
> >
> > > 이 기능은 하드웨어적으로 수행된다
>
> 2. 데이터 링크 계층 (Data Link Layer)
>
>    > 컴퓨터 간의 통신은 전선이 연결되어 있을 경우에만 수행할 수 있다. 하지만 통신하려고 하는 컴퓨터와 모두 전선으로 연결하는 것은 비효율적이고 비용도 많이 든다. 그래서 전선 하나를 갖고 여러 대의 컴퓨터와 통신할 수 있는 방법을 모색해야 한다. 하나의 전선에 여러 컴퓨터가 연결되어 있다면 연결된 컴퓨터가 하나의 데이터를 보내면 나머지 컴퓨터들에게도 모두 정보가 전달된다. 
>    >
>    > 스위치로 메시지의 목적지를 확인해 원하느 사람에게만 전달할 수 있다. 그리고 스위치로 연결된 것을 네트워크 그리고 인트라넷이라고 한다.
>    >
>    > 서로 다른 네트워크에 존재할 때 스위치와 스위츠를 연결해서 서로 다른 네트워크에 속한 컴퓨터끼리 통신이 가능하게 해주는 장비를 라우터라고 한다.
>    >
>    > 이렇게 네트워크는 여러 계층 구조를 가지며 연결되어 있다. 물리 계층에 있는 기능만으로 여러 대의 컴퓨터가 통신할 수 없다
>    >
>    > 여러 대의 컴퓨터가 하나의 컴퓨터에 메시지를 보낸다고 했을 때 수신 측 컴퓨터 입장에서는 해당 데이터를 정확하게 구분할 수 없다. 그래서 앞과 뒤에 플래그를 붙어 데이터를 구분할 수 있도록 한다. 이를 통해 여러 송신 측 컴퓨터로 부터 전달받은 데이터와 여러 발송지로부터 전달받은 데이터를 잘 끊어 읽을 수 있다.
>    >
>    > Framing은 2계층에 속하는 작업들 중 하나이고 앞뒤에 플래그를 붙이는 것을 Framing이라고 한다
>    >
>    > >  이 기능은 하드웨어적으로 수행된다
>
> 3. 네트워크 계층 (Network Layer)
>
>    > 컴퓨터와 컴퓨터 사이에 여러 계층들의 네트워크가 존재할 때가 있다.
>    >
>    > 데이터 앞에 목적지 주소(ip 주소)를 붙여 여러 계층들을 지나가면서 올바른 목적지에 데이터가 전달될 수 있도록 한다. 
>    >
>    > 주소 + 데이터를 패킷이라고 부른다. 
>    >
>    > 라우터는 패킷을 열고 연결된 컴퓨터 중에 해당 IP가 있는 지 확인한다 그리고 패킷을 다시 포장해 상위 라우터로 패킷을 전달한다. 이런 과정을 수행하면서 원하는 목적지에 데이터를 전달할 수 있다. 
>    >
>    > 수많은 네트워크들의 연결로 이루어지는 inter-network 속에서 어딘가에 있는 목적지 컴퓨터로 데이터로 전송하기 위해 IP 주소를 이요해서 길을 찾고 (routing) 자신 다음 라우터에게 데이터를 넘겨주는 것 (forwarding) 모듈의 기능
>    >
>    > > 운영체제 커널에 소프트웨어적으로 구현되어 있다
>    > >
>    > > 3 계층을 통해 인터넷 상의 모든 컴퓨터가 서로와 통신할 수 있게 됐다
>
> 4. 전송 계층 (Transport Layer)
>
>    > 컴퓨터에는 다양한 프로그램들이 실행되고 있고 실행되고 있는 프로그램을 프로세스라고 한다
>    >
>    > 전달받은 데이터를 프로세스에게 나눠줘야 하는데 어떤 데이터를 무슨 프로세스에 줘야할 지 컴퓨터는 알 수 없다. 그래서 데이터를 받고자 하는 프로세스들은 포트번호라는 것을 가져야한다
>    >
>    > 포트 번호는 하나의 컴퓨터에서 실행되고 있는 프로세들이 갖고 있는 서로 겹치지 않는 정수값이다.
>    >
>    > 데이터 전송자는 목적지 프로세스의 포트번호까지 알고 있어야 데이터를 전송할 수 있기 때문에 데이터를 보낼 때 데이터를 받은 수싲나 컴퓨텡 있는 프로세스의 포트 번호를 붙여서 보낸다
>    >
>    > 프토 번호를 사용해 프로세스까지 데이터가 도달할 수 있도록 하는 모듈
>    >
>    > > 운영체제 커널에 소프트웨어적으로 구현되어 있다
>
> 5. 응용 계층 (Application Layer)
>
>    > 네트워크 응용 프로그램을 구축하는데 필요한 2가지 모델 
>    >
>    >  	1. 서버 클리언트
>    >      - 웹 서버가 클라이언트로부터 개체에 대한 요청을 받으면 요청된 개체를 클라이언트로 보낸다
>    >  	2. P2P
>    >      - 서버와 클라이언트의 구분이 명확하지 않음
>    >
>    > 실제 통신하는 것은 프로그램이 아닌 프로세스다. 그리고 프로세스는 컴퓨터 네트워크를 통해 메시지를 교환하며 서로 통신한다.
>    >
>    > 통신을 초기화(다른 프로세스와 세션을 시작하려고 접속을 초기화)하는 프로세스를 클라이언트라 하고, 세션을 시작하기 윟 접속을 기다리는 프로세스를 서버 프로세스라고 구분할 수 있다. 
>    >
>    > 프로세스는 소켓을 통해 네트워크로 메시지를 보내고 받는다. 소켓은 응용계층과 전송 계층 간의 인터페이스다. 
>    >
>    > 