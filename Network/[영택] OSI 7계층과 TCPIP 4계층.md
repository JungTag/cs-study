# OSI 7계층과 TCP/IP 4계층



### OSI 참조 모델이란?

1960~1970년대에는 각 업체가 자신들의 컴퓨터끼리 네트워크를 사용해서 데이터 통신을 할 수 있도록 컴퓨터와 통신에서 사용하는 기기, 그리고 프로토콜을 자신들의 규격으로 만들었다.따라서 다른 회사의와는 규격이 달라 호환되지 않는 문제가 발생했다.

그래서 ISO(International Organization for Standardization, 국제표준화기구)라는 단체가 데이터 통신의 규격과 프로토콜을 통일하려고 시도했다. ISO의 표준화 단계에서 선언한 것이 바로 OSI 참조 모델이다. 이 OSI 참조 모델을 간단하게 말하자면 **데이터 통신을 단계로 나누어 각 단계의 순서를 명확히**하고, **이 모델에 따라 프로토콜을 정의해서 데이터 통신을 구축한 것**이라고 보면 된다.

> 정말 정말 줄여서 말하자면 OSI 참조 모델은 **'단계와 순서의 설계도'**이다. 



좀 더 쉽게 이해하기 위해서 **'편지 주고받기'**를 생각해보자.

1. "먼저 하고 싶은 말을 생각하자" (내용)
2. "비즈니스 문서 형식으로 작성하자" (표현)
3. "봉투에 넣고 수신인을 쓰자" (전송물)
4. "수신인을 보고 수신처까지 운반하자" (전송)

대충 이런 단계로 나뉠 것이다. 그리고 각 단계마다 규칙과 역할이 존재할 것이다. 이를 염두해두고 다음으로 넘어가자.



### OSI 7계층

OSI 참조 모델은 데이터 통신을 7개의 단계로 나누는데, 이 단계를 계층(Layer)라고 부른다. 각 계층은 저마다의 역할과 규칙을 가지고 있다.

![OSI 참조 모델 계층](https://user-images.githubusercontent.com/29058347/120109361-18373280-c1a4-11eb-9b26-446c347860ea.jpg)

#### 1. PDU(Protocol Data Unit)

데이터를 운반하기 위해서는 운반하고 싶은 데이터 이외에 다른 것도 필요하다. 예를 들어 주소가 필요할 것이다. 이렇게 주소와 같이 데이터를 보내기 위해 필요한 것들이 데이터와 통합되어 있는 상태를 프로토콜 데이터 유닛(PDU)이라고 한다.



#### 2. OSI 참조 모델의 계층

>#### 1계층 : 물리계층 (Physical Layer)
>
>물리계층은 OSI 모델의 최하위 계층에 속하며, 상위 계층에서 전송된 데이터를 물리 매체(허브, 라우터, 케이블 등)를 통해 다른 시스템에 전기적 신호를 전송하는 역할을 한다.
>
>즉, 기계어를 전기적 신호로 바꿔서 와이어에 실어주는 것이다.
>
>- PDU : 비트(Bit)
>- 프로토콜 : Modem, Cable, Fiber, RS-232C
>- 장비 : 허브, 리피터
>
>#### 2계층 : 링크계층 (Link Layer)
>
>링크계층은 네트워크 기기들 사이의 데이터 전송을 하는 역할을 한다. 시스템 간의 오류 없는 데이터 전송을 위해 패킷을 `프레임`으로 구성하여 물리계층으로 전송한다. 3계층에서 정보를 받아 주소와 제어정보를 헤더와 테일에 추가한다.
>
>- PDU : 프레임(Frame)
>- 프로토콜 : 이더넷, MAC, PPP, ATM, LAN, Wifi
>- 장비 : 브릿지, 스위치
>
>#### 3계층 : 네트워크계층 (Network Layer)
>
>네트워크계층은 기기에서 데이터그램(Datagram)이 가는 경로를 설정해주는 역할을 한다. 라우팅 알고리즘을 사용하여 최적의 경로를 선택하고 송신측으로부터 수신측으로 전송한다. 이때, 전송되는 데이터는 `패킷` 단위로 분할하여 전송한 후 다시 합쳐진다. 2계층이 노드 대 노드 전달을 감독한다면, 3계층은 각 패킷이 목적지까지 성공적이고 효과적으로 전달되도록 한다.
>
>- PDU : 패킷(Packet)
>- 프로토콜 : IP, ICMP 등
>- 장비 : 라우터, L3 스위치
>
>#### 4계층 : 전송계층 (Transport Layer)
>
>발신지에서 목적지(End-to-End) 간 제어와 에러를 관리한다. 패킷의 전송이 유효한지 확인하고 전송에 실패된 패킷을 다시 보내는 것과 같은 신뢰성있는 통신을 보장하며, 헤드에는 `세그먼트`가 포함된다. 주소 설정, 오류 및 흐름 제어, 다중화를 수행한다.
>
>- PDU : 세그먼트(Segment)
>- 프로토콜 : TCP, UDP , ARP, RTP
>- 장비 : 게이트웨이, L4 스위치
>
>#### 5계층 : 세션계층 (Session Layer)
>
>통신 세션을 구성하는 계층으로, `포트(Port)`번호를 기반으로 연결한다. 통신장치 간의 상호작용을 설정하고 유지하며 동기화한다. 동시송수신(Duplex), 반이중(Half-Duplex), 전이중(Full-Duplex) 방식의 통신과 함께 체크 포인팅과 유후, 종료, 다시 시작 과정 등을 수행한다.
>
>- 프로토콜 : NetBIOS, SSH, TLS
>
>#### 6계층 : 표현계층 (Presentation Layer)
>
>표현계층은 송신측과 수신측 사이에서 `데이터의 형식`(png, jpg, jpeg...)을 정해준다. 받은 데이터를 코드 변환, 구문 검색, 암호화, 압축의 과정을 통해 올바른 표준방식으로 변환해준다.
>
>- 프로토콜 : JPG, MPEG, SMB, AFP
>
>#### 7계층 : 응용계층 (Application Layer)
>
>응용계층은 사용자와 바로 연결되어 있으며 응용 SW를 도와주는 계층이다. 사용자로부터 정보를 입력받아 하위 계층으로 전달하고 하위 계층에서 전송한 데이터를 사용자에게 전달한다.
>
>파일 전송, DB, 메일 전송 등 여러가지 응용 서비스를 네트워크에 연결해주는 역할을 한다.
>
>- 프로토콜 : DHCP, DNS, FTP, HTTP



송신과 수신에는 순서가 있어 그 순서에 따라 데이터 송수신이 이루어진다.

![OSI 7계층](https://user-images.githubusercontent.com/29058347/120109370-1f5e4080-c1a4-11eb-9e8e-05abb6fafd45.png)



### OSI 참조 모델의 장점

OSI 참조 모델의 장점은 계층이 각각 **독립적**이라는 점이다. 이는 **'모듈화'**라는 개념을 생각해보면 쉽게 이해할 수 있다. OSI 참조 모델 내에서 한 계층의 프로토콜 변경은 다른 계층에 영향을 끼치지 않는다. 따라서 통신 과정에서 에러가 발생했을 때, 어느 계층에서 에러가 발생했는지 파악하기가 쉽다.

또한, OSI 참조 모델에 있어 중요한 대전제는 **"하위 계층은 상위 계층을 위해서 일하고 상위 계층은 하위 계층에 관여하지 않는다"**라는 것이다. 이는 각 계층이 독립성을 띄는 데 중요한 개념이 된다.



### 프로토콜과 프로토콜군

프로토콜이란 '데이터 통신을 위한 규칙'이다. OSI 참조 모델은 데이터 통신에 필요한 프로토콜은 한 개가 아니라 복수의 프로토콜로 이루어진다. 이때, 상위 프로토콜과 하위 프로토콜을 연결하는 인터페이스를 지니고 있다면 7계층에서 1계층까지 연결된 프로토콜 그룹이 생긴다. 이것을 프로토콜군(Protocol Suite)라고 부른다. 기본적으로 어느 프로토콜군을 사용하는지에 따라 7계층에서 1계층까지 사용되는 프로토콜이 정해진다.

ISO는 이러한 프로토콜군을 통일하려는 목적에서 OSI 참조 모델에 따라 몇 개의 프로토콜을 만들었다. 이것을 OSI 표준 프로토콜군이라 하는데, 상용화되는 데엔 실패했다. 현재는 이 OSI 프로토콜을 대신해 TCP/IP 프로토콜군이 인터넷에서 보편적으로 사용된다(De Facto Standard). 



### TCP/IP 모델

앞서 OSI 참조 모델이 '단계와 순서의 설계도'라고 언급한 바 있다. 마찬가지로 TCP/IP 모델 또한 TCP/IP 프로토콜군의 설계도인 것이다.

![TCPIP모델](https://user-images.githubusercontent.com/29058347/120109374-238a5e00-c1a4-11eb-8451-f9ef2c70d5c5.png)

TCP/IP 모델은 OSI 참조 모델의 5~7계층이 TCP/IP의 어플리케이션계층, 1~2계층이 인터페이스계층으로 통합된 모델이다. 이해를 돕기 위해 많은 그림이 위처럼 OSI 참조 모델과 TCP/IP 모델을 대응시킨 형태를 띄지만, 실제로 OSI 참조 모델과 TCP/IP 모델은 아무런 관계가 없다.



### (보너스) TCP/IP 프로토콜군

![프로토콜군](https://user-images.githubusercontent.com/29058347/120109375-25542180-c1a4-11eb-83b1-e596361074ab.png)

TCP/IP 모델의 각 계층은 다음과 같은 프로토콜을 이용한다. 주의할 점은 1계층인 인터페이스 계층에 적혀 있는 '이더넷' 등은 정확히 말하면 TCP/IP 프로토콜군이 아니고, 단지 TCP/IP 프로토콜군이 이들 인터페이스계층의 프로토콜을 이용할 수 있다는 의미이다. 

