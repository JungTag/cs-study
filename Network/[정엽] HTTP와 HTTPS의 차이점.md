# HTTP와 HTTPS 및 차이점

---

## HTTP

>  HTTP(Hyper Text Transfer Protocol) 서버/클라이언트 모델에 따라 데이터를 주고 받기 위한 프로토콜
>
> > 인터넷에서 하이퍼텍스트를 주고 교환하기 위한 통신 규약이고 80번 포트를 사용하고 있다
> >
> > 서버 측에서 80번 포트에서 요청을 기다리고 있고 80번 포트로 요청을 보내게 된다

### HTTP의 특징

- 기본적으로 요청/응답 구조로 되어있다
  - 클라이언트가 HTTP request를 서버에 보내면 서버는 HTTP response를 보내는 구조
- Stateless하다 (상태를 저장하지 않음)
  - 요청이 오면 그에 대한 응답을 한다. 즉 여러 요청/응답끼리 연결되어 있지 않고 각각의 요청과 응답은 독립적인 요청과 응답이다
  - 클라이언트가 요청에 대한 응답을 받고 시간이 흐른 후 다시 요청을 보내면 전에 보낸 요청/응답에 대한 정보는 없다
  - 정보를 얻기 위해선 쿠키나 세션 등을 상요하게 된다.

### HTTP의 구조

- Start line
  - EX/ GET / search HTTP/1.1
  - HTTP Method - 해당 request가 의도한 action을 정의하는 부분
  - Request Target - 해당 request가 전송되는 목표 URI
  - HTTP Version
- Headers
  - 해당 request에 대한 추가 정보를 담고 있는 부분
  - Key:Value로 구성되어 있다
  - Headers도 크게 3부분으로 나뉜다
    - General Headers
    - Request Headers
    - Entity Headers
  - 자주 사용되는 Header 정보
    - Host : 요청이 전송되는 target의 host url
    - User-Agent : 요청을 보내는 클라이어트에 대한 정보 ex/ 웹 브라우저에 대한 정보
    - Accept - 해당 요청이 받을 수 있는 응답(response) 타입
    - Connection - 요청이 끝난 후 클라이언트와 서버가 계속해서 네트워크 연결을 유지할 것인지 아닌지
    - Content-Type - 해당 요청이 보내는 body의 타입. 주로 json으로 보내기 때문에 application/json을 주로 사용한다
    - Content-Lenght - 메시지 body의 길이
- Body
  - 실제 메시지 또는 내용

### 문제점

평문 데이터를 전송하는 프로토콜이기 때문에 암호화가 되어 있지 않아 HTTP로 중요한 정보를 주고 받을 경우에 제3 자가 이를 조회할 수 있었다. 



---

## HTTPS

> HTTPS(Hyper Text Transfer Protocla Secure)
>
> HTTP의 취약점인 보안을 보완하기 위해 만들어졌고 주로 433번 포트를 사용한다
>
> SSL(보안 소켓 계층)을 이용해 보안을 강화한다
>
> > 안전하게 암호화된 연결을 만들 수 있게 도와주고 서버 브라우저가 민감한 정보를 주고 받을 때 도난당하는 것을 막아준다.

### 키

- 공개키
  - 모두에게 공개되는 키
  - **개인키와 쌍을 이루어 존재한다**
- 개인키
  - 키 발행자 만이 갖는 키이다.
  - **공개키와 쌍을 이루어 존재한다**
- 대칭키
  - 암호화/복호화에 동일한 하나의 키를 사용한다.
  - 대칭키는 암호화와 복호화 모두에 사용되기 때문에 이를 탈취당하면 보안상 큰 위험이 있다. 

1. 서버는 인증기관에게 서버에 대한 정보와 서버의 공개키를 전달한다
2. 인증 기관은 해당 인증 기관의 개인키를 통해 서버에 대한 정보와 서버의 공개키를 암호화하고 암호화 한 것을 서버에게 넘겨준다
3. 인증 기관은 브라우저에게 해당 인증기관의 공개키를 전달해준다
4. 브라우저가 서버에게 접속 요청을 하면 서버에선 인증기관의 개인키로 암호화된 정보를 넘겨준다.
5. 인증 기관의 개인키로 암호화 되어 있기 때문에 인증기관으로부터 전달받은 공개키로 이를 복호화하고 서버에 대한 정보와 서버의 공개키를 얻는다.
6. 브라우저는 서버의 공개키로 랜덤 대칭키를 암호화 해 이를 서버로 전달한다
7. 서버는 브라우저로부터 받은 정보를 개인키를 이용해 복호화하고 랜덤 대칭키를 전달받는다.
8. 안전하게 전달된 대칭키를 이용해 암호문을 주고 받는다.

---

## HTTP와 HTTPS의 차이점

정보의 암호화 유무

정보가 탈취되더라도 데이터가 암호화되어있기 때문에 해독할 수 없다. 

HTTPS를 이용하면 암호화/복호화의 과정이 필요하기 때문에 HTTP보다 속도가 느리고  인증서를 발급하고 유지하기 위한 추가 비용이 발생한다. 